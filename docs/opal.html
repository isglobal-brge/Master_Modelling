<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Opal | Data Visualisation and Modelling</title>
  <meta name="description" content="7 Opal | Data Visualisation and Modelling" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Opal | Data Visualisation and Modelling" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Opal | Data Visualisation and Modelling" />
  
  
  

<meta name="author" content="Juan R González" />


<meta name="date" content="2021-10-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datashield.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Visualisation and Modelling</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html"><i class="fa fa-check"></i><b>2</b> Dealing with Big Data in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#nodes-cores-processes-and-threads"><i class="fa fa-check"></i><b>2.1</b> Nodes, cores, processes and threads</a></li>
<li class="chapter" data-level="2.2" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#paralelización"><i class="fa fa-check"></i><b>2.2</b> Paralelización</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#shared-memory-programming"><i class="fa fa-check"></i><b>2.2.1</b> Shared Memory Programming</a></li>
<li class="chapter" data-level="2.2.2" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#distributed-memory-programming"><i class="fa fa-check"></i><b>2.2.2</b> Distributed Memory Programming</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#mapreduce"><i class="fa fa-check"></i><b>2.3</b> MapReduce</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#map"><i class="fa fa-check"></i><b>2.3.1</b> Map</a></li>
<li class="chapter" data-level="2.3.2" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#reduce"><i class="fa fa-check"></i><b>2.3.2</b> Reduce</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="dealing-with-big-data-in-r.html"><a href="dealing-with-big-data-in-r.html#linear-regression-for-big-data"><i class="fa fa-check"></i><b>2.4</b> Linear regression for Big Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>3</b> Linear models</a>
<ul>
<li class="chapter" data-level="3.1" data-path="linear-models.html"><a href="linear-models.html#ols-estimation-in-r"><i class="fa fa-check"></i><b>3.1</b> OLS estimation in R</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="generalized-linear-models.html"><a href="generalized-linear-models.html"><i class="fa fa-check"></i><b>4</b> Generalized linear models</a>
<ul>
<li class="chapter" data-level="4.1" data-path="generalized-linear-models.html"><a href="generalized-linear-models.html#logistic-regression-with-r"><i class="fa fa-check"></i><b>4.1</b> Logistic regression with R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model-fitting.html"><a href="model-fitting.html"><i class="fa fa-check"></i><b>5</b> Model Fitting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="model-fitting.html"><a href="model-fitting.html#getting-started"><i class="fa fa-check"></i><b>5.1</b> Getting started</a></li>
<li class="chapter" data-level="5.2" data-path="model-fitting.html"><a href="model-fitting.html#general-rules-for-variable-selection"><i class="fa fa-check"></i><b>5.2</b> General rules for variable selection</a></li>
<li class="chapter" data-level="5.3" data-path="model-fitting.html"><a href="model-fitting.html#stepwise-variable-selection"><i class="fa fa-check"></i><b>5.3</b> Stepwise variable selection</a></li>
<li class="chapter" data-level="5.4" data-path="model-fitting.html"><a href="model-fitting.html#comparing-models"><i class="fa fa-check"></i><b>5.4</b> Comparing models</a></li>
<li class="chapter" data-level="5.5" data-path="model-fitting.html"><a href="model-fitting.html#automatic-variable-selection"><i class="fa fa-check"></i><b>5.5</b> Automatic variable selection</a></li>
<li class="chapter" data-level="5.6" data-path="model-fitting.html"><a href="model-fitting.html#cross-validation"><i class="fa fa-check"></i><b>5.6</b> Cross validation</a></li>
<li class="chapter" data-level="5.7" data-path="model-fitting.html"><a href="model-fitting.html#cross-validation-and-bootstrap"><i class="fa fa-check"></i><b>5.7</b> Cross-validation and Bootstrap</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="model-fitting.html"><a href="model-fitting.html#leave-one-out-cross-validation-loocv"><i class="fa fa-check"></i><b>5.7.1</b> Leave-one-out cross validation (LOOCV)</a></li>
<li class="chapter" data-level="5.7.2" data-path="model-fitting.html"><a href="model-fitting.html#k-fold-cross-validation-k-fold-cv"><i class="fa fa-check"></i><b>5.7.2</b> K-fold cross validation (K-fold CV)</a></li>
<li class="chapter" data-level="5.7.3" data-path="model-fitting.html"><a href="model-fitting.html#bootstrap"><i class="fa fa-check"></i><b>5.7.3</b> Bootstrap</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="model-fitting.html"><a href="model-fitting.html#example-with-caret-library"><i class="fa fa-check"></i><b>5.8</b> Example with <code>caret</code> library</a></li>
<li class="chapter" data-level="5.9" data-path="model-fitting.html"><a href="model-fitting.html#missing-data-imputation"><i class="fa fa-check"></i><b>5.9</b> Missing data imputation</a></li>
<li class="chapter" data-level="5.10" data-path="model-fitting.html"><a href="model-fitting.html#regularization"><i class="fa fa-check"></i><b>5.10</b> Regularization</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datashield.html"><a href="datashield.html"><i class="fa fa-check"></i><b>6</b> DataSHIELD</a></li>
<li class="chapter" data-level="7" data-path="opal.html"><a href="opal.html"><i class="fa fa-check"></i><b>7</b> Opal</a>
<ul>
<li class="chapter" data-level="7.1" data-path="opal.html"><a href="opal.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="opal.html"><a href="opal.html#data-management"><i class="fa fa-check"></i><b>7.2</b> Data Management</a></li>
<li class="chapter" data-level="7.3" data-path="opal.html"><a href="opal.html#security"><i class="fa fa-check"></i><b>7.3</b> Security</a></li>
<li class="chapter" data-level="7.4" data-path="opal.html"><a href="opal.html#r-integration"><i class="fa fa-check"></i><b>7.4</b> R Integration</a></li>
<li class="chapter" data-level="7.5" data-path="opal.html"><a href="opal.html#opal-demo-site"><i class="fa fa-check"></i><b>7.5</b> Opal demo site</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualisation and Modelling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="opal" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Opal</h1>
<div id="introduction" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Introduction</h2>
<p>Opal is <a href="https://www.obiba.org/">OBiBa</a>’s core database application for epidemiological studies. Participant data, collected by questionnaires, medical instruments, sensors, administrative databases etc. can be integrated and stored in a central data repository under a uniform model. Opal is a web application that can import, process, copy data and has advanced features for cataloging the data (fully described, annotated and searchable data dictionaries) as recommended by the <a href="https://www.maelstrom-research.org">Maelstrom Research</a> group at McGill University, Canada. Opal is typically used by a research center to analyze the data acquired from assessment centres. Its ultimate purpose is to achieve seamless data-sharing among epidemiological studies. Opal is the reference implementation of the <a href="http://www.datashield.ac.uk/">DataSHIELD</a> infrastructure. More information on Opal can be found in the <a href="https://www.obiba.org/pages/products/opal/">Opal description on OBiBa</a>.</p>
<p>Opal provides the following main features:</p>
<ul>
<li>Use of MongoDB, Mysql, MariaDB and/or PostgreSQL as database software backends,</li>
<li>Import of data from various file formats (CSV, SPSS, SAS, Stata etc.) and from SQL databases,</li>
<li>Export of data to various file formats (CSV, SPSS, SAS, Stata etc.) and to SQL databases,</li>
<li>Plugin architecture to extend import/export capabilities, for instance by connecting to data source software such as REDCap, LimeSurvey etc.,</li>
<li>Storage of data about any type of “entity”, such as subject, sample, geographic area, etc.,</li>
<li>Storage of data of any type (e.g., texts, numbers, geo-localisation, images, videos, etc.),</li>
<li>Advanced authentication and authorization features,</li>
<li>Reporting using R markdown,</li>
<li>Data analysis plugins using R,</li>
<li>Web services can be accessed using R, Python, Java, Javascript,</li>
<li>DataSHIELD middleware reference implementation (configuration, access controls, R session management).</li>
</ul>
</div>
<div id="data-management" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Data Management</h2>
<p>In Opal the data sets are represented by tables, which are grouped by projects. A table has variables (columns) and entity values (rows). Opal also has the concept of views, which are logical tables where the variables are derived from physical tables via scripts. The storage of the data and of the meta-data (data dictionaries) is managed in a database (for example, a SQL database such as MySQL, MariaDB or PostgreSQL, or a document-oriented database such as MongoDB).</p>
<p>Detailed concepts and tutorials for tables can be found here:</p>
<ul>
<li><a href="http://opaldoc.obiba.org/en/latest/variables-data.html">Variables and Data</a></li>
<li><a href="http://opaldoc.obiba.org/en/latest/ids.html">Identifiers Mappings</a></li>
<li><a href="http://opaldoc.obiba.org/en/latest/data-harmonization.html">Data Harmonization</a></li>
</ul>
</div>
<div id="security" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Security</h2>
<p>All Opal operations are accessible through web services that require authentication and proper authorization. The permissions can be granted to a specific user or a group of users, can be applied to a project or to a table and have different levels: <em>read-only meta-data</em> (access to the data dictionary without access to the individual-level data), <em>read-only</em>, or <em>write</em> permissions. The programmatic authentication can make use of <em>username/password</em> credentials, <em>token</em> or <em>2-way SSL</em> authentication methods. Opal can also integrate with the hosting institution’s users registry using the <a href="https://openid.net/connect/">OpenID Connect</a> standard.</p>
</div>
<div id="r-integration" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> R Integration</h2>
<p>Opal connects to a R server to perform different kind of operations:</p>
<ul>
<li>data import/export (using R packages),</li>
<li>data analysis (by transfering data from Opal’s database into a R server session and using R packages).</li>
</ul>
<p>The R server is based on the <a href="https://cran.r-project.org/package=Rserve">Rserve</a> R package. The user R sessions that are running in this R server are managed by Opal.</p>
<p>This Opal/R integration works well for small to mid-size datasets (usually less than 10M data points). For bigger datasets, extracting and transferring data from the database to the R server is time, CPU and memory intensive. In this work, we will present a more flexible data description paradigm called <a href="#resources">resources</a> that enables Opal to manage access to Big Data sets, complex data structures and computation units for analysis purpose, while still having the security and the analysis features provided by Opal.</p>
</div>
<div id="opal-demo-site" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Opal demo site</h2>
<p>We have set up an <a href="http://opal-demo.obiba.org/">Opal demo site</a> to illustrate how to perform some basic analyses using DataSHIELD as well as how to deal with different <em>resources</em> for ’omic data. The Opal server can be accessed with the credentials:</p>
<ul>
<li>username: <code>administrator</code></li>
<li>password: <code>password</code></li>
</ul>
<p>In this figure we can see all the projects available.</p>
<div class="figure">
<img src="fig/opal_projects.png" alt="" />
<p class="caption">Opal demo site available projects</p>
</div>
<p>This vignette will mainly make use of the resources available at <code>RSRC</code> project</p>
<div class="figure">
<img src="fig/resources_rsrc.png" alt="" />
<p class="caption">Resources available at Opal demo site of RSRC project</p>
</div>
<p>In order to make the reader familiar with Opal we recommend visiting <a href="http://opaldoc.obiba.org/">the Opal online documentation</a>.</p>

</div>
</div>










            </section>

          </div>
        </div>
      </div>
<a href="datashield.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/isglobal-brge/Aprendizaje_Automatico_1/tree/master/docs04-DataSHIELD.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
